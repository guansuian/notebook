
**答案是：必须是！而且是教科书级别的 RBAC 实现。**

如果说 RBAC 是“理论”，那 RuoYi 就是这个理论的“最佳实践样板间”。

如果你能看懂 RuoYi 的数据库设计，你就等于彻底看懂了企业级 RBAC 是怎么玩的。

我来带你把 **RBAC 的理论** 和 **RuoYi 的代码（表结构）** 做一个**一一映射**，你就彻底明白了。

---

### 1. 核心映射：经典的“五张表”

我们在理论中学的 RBAC 模型，在 RuoYi 里完美对应这 5 张表（请打开数据库对着看）：

|**RBAC 理论概念**|**RuoYi 表名**|**说明**|
|---|---|---|
|**User (用户)**|`sys_user`|存用户名、密码、部门ID等。|
|**Role (角色)**|`sys_role`|存角色名称（如“普通用户”）、角色Key（如 `common`）。|
|**Permission (权限)**|**`sys_menu`**|**注意！** 若依把“菜单”和“按钮权限”都放在这一张表里了。|
|**User-Role (用户-角色)**|`sys_user_role`|关联表。存 `user_id` 和 `role_id`。|
|**Role-Permission (角色-权限)**|`sys_role_menu`|关联表。存 `role_id` 和 `menu_id`。|

---

### 2. 关键点：若依的“权限”设计（sys_menu）

很多新手会困惑：“我在数据库里找不到 `sys_permission` 表啊？”

**这是若依的一个巧妙设计**：它把 **“能看什么页面（菜单）”** 和 **“能点什么按钮（权限）”** 合并到了 `sys_menu` 这一张表里。

你看 `sys_menu` 表里的 `menu_type` 字段：

- **M (Directory 目录)**：左侧导航栏的一级菜单（如“系统管理”）。
    
- **C (Menu 菜单)**：具体的页面（如“用户管理”）。
    
- **F (Button 按钮)**：**这才是真正的权限！**
    
    - 比如“新增用户”按钮。
        
    - 它的 `perms` 字段存的是：`system:user:add`。
        
    - 这就是 Spring Security 里的 `hasPermi('system:user:add')` 校验的数据来源。
        

---

### 3. 若依是如何实现 RBAC 流程的？

还记得我之前说的“安保手册”和“安保队长”吗？我们看看若依是怎么演这场戏的：

1. **分配权限（在页面上点点点）：**
    
    - 管理员在“角色管理”页面，给“HR角色”勾选了“用户管理”菜单和“新增用户”按钮。
        
    - **后端动作：** 往 `sys_role_menu` 表里插了几条数据，把 Role 和 `sys_menu` 里的 ID 绑定起来。
        
2. **登录（加载权限）：**
    
    - 你登录时，`UserDetailsServiceImpl` 去查 `sys_user` -> `sys_role` -> `sys_role_menu` -> `sys_menu`。
        
    - 它把查出来的字符串 `["system:user:list", "system:user:add"]` 塞给了 Spring Security。
        
3. **鉴权（拦截请求）：**
    
    - 你在前端点击“新增”按钮，请求发给 `SysUserController`。
        
    - Controller 顶上写着：`@PreAuthorize("@ss.hasPermi('system:user:add')")`。
        
    - **结果：** 这一步校验通过，RBAC 闭环完成。
        

---

### 4. 若依超越标准 RBAC 的地方

若依不仅实现了 RBAC，还实现了我们之前面试题里提到的 **“数据权限”**。

它不仅仅看 `sys_role`，它还在 `sys_role` 表里加了一个字段叫 **`data_scope`**（数据范围）。

- **功能：** 它能控制你是只能看“本部门的数据”，还是能看“所有数据”。
    
- **实现：** 这就是为什么你在代码里看不到它，因为它是用 AOP（切面）做的，在 SQL 执行前悄悄把 `WHERE dept_id = ...` 加上去了。
    

### 总结

- **若依是 RBAC 吗？** 是，它是最标准的 **RBAC1 模型**（带有角色继承/层级概念）+ **数据权限**。
    
- **怎么看？** 只要你搞懂了 `sys_menu` 表里的 `perms` 字段是怎么和 Java 代码里的 `@PreAuthorize` 对应上的，你就看懂了若依的 RBAC。